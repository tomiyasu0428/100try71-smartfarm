# 農場管理システム 画面設計書

## 1. 全体画面構成

### 1.1 共通要素

- **ヘッダー**: ロゴ、ナビゲーションメニュー、ユーザー情報
- **サイドバー**: 主要機能へのリンク、現在のコンテキスト情報
- **フッター**: 著作権情報、バージョン、お問い合わせリンク

### 1.2 主要ページ一覧

1. **AIアシスタント & ダッシュボード**: AIチャットを中心とした統合トップ画面
2. **圃場管理**: 圃場の登録・閲覧・編集
3. **作物マスタ管理**: 作物情報と栽培ワークフローの管理
4. **作付け計画管理**: 圃場への作付けと栽培計画
5. **作業予定管理**: スケジュール表示と作業指示
6. **カレンダー表示**: 統合カレンダービュー
7. **資材/農機管理**: 資材と農機具の在庫管理
8. **レポート/分析**: データ分析とレポート生成
9. **設定**: ユーザー設定、システム設定

## 2. 画面詳細設計

### 2.1 AIアシスタント & ダッシュボード

**目的**: AIとの対話を中心としたシステム操作と情報閲覧

**レイアウト**:
```
+--------------------------------------------------------------+
| Logo   農場管理システム                   天気: 晴れ 23℃   ユーザー ▼ |
+---------------+----------------------------------------------+
|               |  AIアシスタント & ダッシュボード               |
| ダッシュボード   | +------------------------------------------+ |
| 圃場管理       | |                                          | |
| 作物マスタ     | |         チャット履歴表示エリア              | |
| 作付け計画     | |                                          | |
| 作業予定       | | システム: おはようございます、田中さん。     | |
| カレンダー     | | 今日は3月26日水曜日です。                  | |
| 資材/農機      | | 圃場Aではトマトの追肥作業が予定されています。 | |
| レポート       | | 資材アラート：肥料Aの在庫が少なくなっています。| |
| 設定          | |                                          | |
|               | | ユーザー: 今日の作業を教えて                | |
|               | |                                          | |
|               | | システム: 本日予定されている作業は以下の通りです：| |
+---------------+ | ・9:00- 圃場A トマト追肥作業 (担当:山田)    | |
                  | ・13:00- 圃場C 大根間引き作業 (担当:鈴木)   | |
                  | ・16:00- トラクターAのメンテナンス (担当:田中)| |
                  |                                          | |
                  +------------------------------------------+ |
                  | [質問や指示を入力...]            🎤  📷  送信 | |
                  +------------------------------------------+ |
                  |  コンテキストパネル（AIとの会話に応じて変化）   | |
                  +------------------------------------------+ |
                  | 【作業予定】                  [すべて表示 >] | |
                  | □ 圃場A - トマト - 追肥作業       09:00-   | |
                  | □ 圃場C - 大根 - 間引き作業      13:00-   | |
                  |                                          | |
                  | 【圃場ミニマップ】            [地図表示 >]  | |
                  | [圃場の簡易マップ表示]                     | |
                  +------------------------------------------+ |
+--------------------------------------------------------------+
| © 2025 農場管理システム                                       |
+--------------------------------------------------------------+
```

**主要コンポーネント**:
- **チャットインターフェース**: AIとの対話履歴表示と入力
- **コンテキストパネル**: 対話内容に応じて変化する情報表示
- **作業予定ウィジェット**: 当日の作業リスト
- **圃場ミニマップ**: 圃場の位置と状態を視覚化

**特徴と機能**:
- 自然言語による情報検索と操作
- プロアクティブな情報提供（挨拶時の重要情報サマリー）
- 音声入力（🎤）と写真添付（📷）機能
- 動的に変化するコンテキスト依存情報表示

### 2.2 圃場管理

**目的**: 圃場情報の登録・編集・閲覧

**レイアウト**:
```
+------------------------------------+
| ヘッダー                           |
+--------+---------------------------+
| サイド  | 圃場一覧 | 新規登録ボタン  |
| バー    +----------+--------------+
|        |                          |
|        | 地図表示                  |
|        | （圃場のポリゴン表示）      |
|        |                          |
|        +---------------------------+
|        | 選択圃場の詳細情報         |
+--------+---------------------------+
| フッター                           |
+------------------------------------+
```

**画面遷移**:
1. **圃場一覧**: 登録済み圃場のリスト表示
   - 一覧表には圃場名、面積、現在の作付け状況を表示
   - フィルタ/ソート機能を提供
   - 各行をクリックすると詳細表示

2. **圃場登録/編集**:
   ```
   +------------------------------------+
   | 圃場情報の登録/編集                |
   +------------------------------------+
   | 圃場名: [____________]             |
   | 面積:   [___] ha                   |
   | 土壌タイプ: [ドロップダウン]        |
   +------------------------------------+
   | 境界情報の描画:                    |
   |                                    |
   | [地図上で境界ポリゴンを描画するUI]  |
   |                                    |
   +------------------------------------+
   | メモ: [                ]           |
   |      [________________]           |
   +------------------------------------+
   | [キャンセル]    [保存]             |
   +------------------------------------+
   ```

3. **圃場詳細表示**:
   - 基本情報（名称、面積、位置情報）
   - 地図上の表示
   - 現在の栽培状況
   - 過去の作付け履歴（直近3シーズン程度）
   - 編集/削除ボタン

### 2.3 作物マスタと栽培ワークフロー管理

**目的**: 作物情報の登録と管理、詳細な栽培ワークフローの設定

**2.3.1 作物マスタ画面**:
```
+------------------------------------+
| ヘッダー                           |
+--------+---------------------------+
| サイド  | 作物一覧 | 新規登録ボタン  |
| バー    +----------+--------------+
|        |                          |
|        | 作物リスト（テーブル形式）  |
|        |                          |
|        +---------------------------+
|        | 作物詳細情報               |
|        | （選択時に表示）           |
+--------+---------------------------+
| フッター                           |
+------------------------------------+
```

**2.3.2 栽培ワークフロー管理メイン画面**:
```
+--------------------------------------------------------------+
| ヘッダー                                           ユーザー ▼ |
+---------------+----------------------------------------------+
| サイド        | 栽培ワークフローテンプレート管理              |
| バー          | +------------------------------------------+ |
|               | | 作物: [トマト▼]   [+ 新規テンプレート]   | |
|               | +------------------------------------------+ |
|               | | テンプレート一覧                         | |
|               | |                                         | |
|               | | ■ トマト標準夏作 (デフォルト)            | |
|               | | ■ トマトミニハウス栽培                   | |
|               | | ■ トマト露地秋作                        | |
|               | +------------------------------------------+ |
|               |                                             | |
|               | 「トマト標準夏作」テンプレート詳細           | |
|               | +------------------------------------------+ |
|               | | 基本情報                                 | |
|               | | 名称: [トマト標準夏作]                   | |
|               | | 作成者: 田中農園                         | |
|               | | 適用季節: [夏作▼]                       | |
|               | | デフォルト: [✓]                         | |
|               | +------------------------------------------+ |
+---------------+                                              |
                  | フェーズと作業                           | |
                  | +------------------------------------------+ |
                  | | フェーズ1: 育苗期                      | |
                  | | 開始: Day 1  期間: 30日                | |
                  | | 説明: 種まきから本葉が5-6枚になるまで     | |
                  | |                                        | |
                  | | 作業一覧:                              | |
                  | | +-------------------------------------+ | |
                  | | | カテゴリ | 作業名 | 日数 | 繰返 | 資材 | | |
                  | | +-------------------------------------+ | |
                  | | | 播種   | 育苗トレイ播種 | Day 1 | 1回| ✓ | | |
                  | | | 水管理 | 水やり      | Day 1-30|毎日| - | | |
                  | | | 管理   | 間引き      | Day 14  | 1回| - | | |
                  | | | 肥料   | 液肥追加    | Day 21  | 1回| ✓ | | |
                  | | +-------------------------------------+ | |
                  | | [+ 作業追加]                           | |
                  | +------------------------------------------+ |
                  |                                             | |
                  | [+ フェーズ追加]                            | |
                  |                                             | |
                  | 資材詳細 (クリックした作業の資材が表示)       | |
                  | +------------------------------------------+ |
                  | | 「育苗トレイ播種」で使用する資材:          | |
                  | | - トマト種子: 2g/トレイ                  | |
                  | | - 育苗培土: 5kg/トレイ                   | |
                  | | - 育苗トレイ: 1枚                        | |
                  | | [+ 資材追加]                            | |
                  | +------------------------------------------+ |
+--------------------------------------------------------------+
```

**2.3.3 作業詳細編集画面**:
```
+--------------------------------------------------------------+
| 「育苗トレイ播種」作業の編集                      [×] 閉じる  |
+--------------------------------------------------------------+
| 基本情報                                                     |
| +----------------------------------------------------------+ |
| | 作業名: [育苗トレイ播種]                                  | |
| | カテゴリ: [播種▼]                                        | |
| | 所属フェーズ: [育苗期]                                    | |
| | フェーズ内順序: [1]                                       | |
| +----------------------------------------------------------+ |
|                                                              |
| タイミング                                                   |
| +----------------------------------------------------------+ |
| | フェーズ開始からの日数: [1] 日目                           | |
| | 繰り返し: [1] 回                                          | |
| | 繰り返し間隔: [--] 日 (複数回の場合)                       | |
| | 想定作業時間: [2.5] 時間                                  | |
| +----------------------------------------------------------+ |
|                                                              |
| 作業手順                                                     |
| +----------------------------------------------------------+ |
| | 1. 育苗トレイを準備し、培土を充填する                       | |
| | 2. トレイのセルごとに2-3粒のトマト種子を播種する            | |
| | 3. 覆土して軽く鎮圧する                                   | |
| | 4. 十分に水を与え、発芽まで湿度を保つ                      | |
| | [+ 手順追加]                                             | |
| +----------------------------------------------------------+ |
|                                                              |
| 必要資材                                                     |
| +----------------------------------------------------------+ |
| | 資材タイプ | 資材名    | 数量 | 単位 | 備考              | |
| | 種子     | トマト種子 | 2    | g    | 品種:桃太郎       | |
| | 培土     | 育苗培土   | 5    | kg   | pH調整済み        | |
| | 資材     | 育苗トレイ | 1    | 枚   | 128穴            | |
| | [+ 資材追加]                                             | |
| +----------------------------------------------------------+ |
|                                                              |
| [キャンセル]                                [保存]           |
+--------------------------------------------------------------+
```

**2.3.4 フェーズ編集画面**:
```
+--------------------------------------------------------------+
| 「育苗期」フェーズの編集                           [×] 閉じる  |
+--------------------------------------------------------------+
| 基本情報                                                     |
| +----------------------------------------------------------+ |
| | フェーズ名: [育苗期]                                      | |
| | フェーズ順序: [1]                                         | |
| | 開始日からの日数: [1] 日目                                 | |
| | 想定期間: [30] 日間                                       | |
| +----------------------------------------------------------+ |
|                                                              |
| フェーズの説明                                               |
| +----------------------------------------------------------+ |
| | 種まきから本葉が5-6枚程度になるまでの育苗期間です。         | |
| | 温度管理と水分管理が特に重要なフェーズです。                | |
| +----------------------------------------------------------+ |
|                                                              |
| このフェーズの作業一覧                                        |
| +----------------------------------------------------------+ |
| | ・育苗トレイ播種 (Day 1)                                  | |
| | ・水やり (Day 1-30, 毎日)                                | |
| | ・間引き (Day 14)                                        | |
| | ・液肥追加 (Day 21)                                      | |
| +----------------------------------------------------------+ |
|                                                              |
| [キャンセル]                                [保存]           |
+--------------------------------------------------------------+
```

**2.3.5 テンプレート新規作成画面**:
```
+--------------------------------------------------------------+
| 新規栽培ワークフローテンプレート作成                 [×] 閉じる  |
+--------------------------------------------------------------+
| 基本情報                                                     |
| +----------------------------------------------------------+ |
| | 作物: [トマト▼]                                          | |
| | テンプレート名: [____________]                            | |
| | 適用季節: [ ] 春作 [ ] 夏作 [ ] 秋作 [ ] 冬作             | |
| | デフォルト設定: [ ] このテンプレートをデフォルトにする       | |
| +----------------------------------------------------------+ |
|                                                              |
| テンプレート作成方法                                          |
| +----------------------------------------------------------+ |
| | [○] 新規作成                                             | |
| | [○] 既存テンプレートからコピー: [トマト標準夏作▼]          | |
| +----------------------------------------------------------+ |
|                                                              |
| テンプレートの説明                                           |
| +----------------------------------------------------------+ |
| | [                                                      ] | |
| | [                                                      ] | |
| +----------------------------------------------------------+ |
|                                                              |
| [キャンセル]                                [作成]           |
+--------------------------------------------------------------+
```

### 2.4 作付け計画管理

**目的**: 圃場への作物の作付け計画を作成・管理

**レイアウト**:
```
+------------------------------------+
| ヘッダー                           |
+--------+---------------------------+
| サイド  | 作付け計画リスト | +新規   |
| バー    +------------------+------+
|        |                          |
|        | 計画詳細 / 編集フォーム    |
|        |                          |
|        +---------------------------+
|        | 関連作業スケジュール        |
|        | （ガントチャート表示）      |
+--------+---------------------------+
| フッター                           |
+------------------------------------+
```

**画面遷移**:
1. **作付け計画一覧**: 
   - 年度/シーズンでフィルタ可能なリスト
   - 圃場、作物、期間情報を表示
   - ステータス（計画中、進行中、完了）の視覚化

2. **作付け計画登録/編集**:
   ```
   +------------------------------------+
   | 作付け計画の登録/編集              |
   +------------------------------------+
   | 圃場: [ドロップダウン]             |
   | 作物: [ドロップダウン]             |
   | 作付け回数: [_] (同一年内)         |
   | 栽培年: [____]                    |
   | 開始予定日: [日付選択]             |
   | 終了予定日: [日付選択]             |
   +------------------------------------+
   | 栽培ワークフロー:                  |
   | [ドロップダウン] ← 作物からロード   |
   +------------------------------------+
   | [キャンセル]    [保存]             |
   +------------------------------------+
   ```

3. **作付け詳細とスケジュール表示**:
   - 基本情報（圃場、作物、期間）
   - ワークフローから生成された作業予定（ガントチャート）
   - 必要資材の自動計算と表示
   - スケジュール調整機能

### 2.5 作業予定管理

**目的**: 農作業のスケジュール管理と実績記録

**レイアウト**:
```
+------------------------------------+
| ヘッダー                           |
+--------+---------------------------+
| サイド  | 表示切替: [リスト▼]       |
| バー    +---------------------------+
|        | 期間: [週選択] [+新規作業] |
|        +---------------------------+
|        |                           |
|        | 作業リスト/カレンダー表示   |
|        |                           |
|        +---------------------------+
|        | 作業詳細 / 記録フォーム     |
+--------+---------------------------+
| フッター                           |
+------------------------------------+
```

**画面遷移**:
1. **作業リスト表示**: 
   - 予定日でソートした作業リスト
   - フィルタ（圃場、作物、担当者、ステータス）
   - 各作業の進捗ステータス（未着手、進行中、完了）
   - チェックリスト形式で完了をマーク可能

2. **作業登録/編集**:
   ```
   +------------------------------------+
   | 作業の登録/編集                    |
   +------------------------------------+
   | 作業名: [____________]             |
   | 作業タイプ: [ドロップダウン]        |
   | 関連作付け計画: [ドロップダウン]    |
   | または                             |
   | 圃場: [ドロップダウン]             |
   +------------------------------------+
   | 予定日: [日付選択]                 |
   | 担当者: [ドロップダウン]           |
   +------------------------------------+
   | 必要資材:                          |
   | [ ] 肥料A  [__] kg                |
   | [ ] 農薬B  [__] L                 |
   | [+資材追加]                       |
   +------------------------------------+
   | メモ: [                ]           |
   |      [________________]           |
   +------------------------------------+
   | [キャンセル]    [保存]             |
   +------------------------------------+
   ```

3. **作業実績記録**:
   ```
   +------------------------------------+
   | 作業実績の記録                     |
   +------------------------------------+
   | 作業名: 第1回追肥                  |
   | 予定日: 2025-04-15                |
   +------------------------------------+
   | 実施日: [日付選択] ← 今日設定可能   |
   | 開始時間: [時間選択]               |
   | 終了時間: [時間選択]               |
   | 担当者: [ドロップダウン]           |
   +------------------------------------+
   | 実際に使用した資材:                 |
   | ┣ 肥料A: [__] kg                  |
   | ┗ 追加資材: [+追加]               |
   +------------------------------------+
   | 天候: [晴れ▼]  気温: [__]℃        |
   +------------------------------------+
   | 作業メモ: [                ]       |
   |          [________________]       |
   +------------------------------------+
   | ステータス: [完了▼]                |
   +------------------------------------+
   | [キャンセル]    [記録]             |
   +------------------------------------+
   ```

### 2.6 カレンダー表示

**目的**: 全ての予定と作業を統合的に表示

**レイアウト**:
```
+--------------------------------------------------+
| ≡ メニュー    カレンダー         [月] [週] [日]   |
+--------------------------------------------------+
| 4月 2025     <    今日    >        + 新規作業    |
+--------------------------------------------------+
| 日   | 月   | 火   | 水   | 木   | 金   | 土     |
+------+------+------+------+------+------+--------+
|      |  1   |  2   |  3   |  4   |  5   |  6     |
|      |      |      |      |●防除 |      |        |
|      |      |      |      |圃場B |      |        |
+------+------+------+------+------+------+--------+
|  7   |  8   |  9   | 10   | 11   | 12   | 13     |
|      |●定植 |      |●追肥 |      |      |        |
|      |圃場D |      |圃場A |      |      |        |
+------+------+------+------+------+------+--------+
| 14   | 15   | 16   | 17   | 18   | 19   | 20     |
|      |■収穫 |      |      |●設備 |      |        |
|      |圃場C |      |      |点検  |      |        |
+------+------+------+------+------+------+--------+
| 21   | 22   | 23   | 24   | 25   | 26   | 27     |
|      |      |      |●防除 |      |      |        |
|      |      |      |圃場A |      |      |        |
+------+------+------+------+------+------+--------+
| 28   | 29   | 30   |      |      |      |        |
|      |      |      |      |      |      |        |
|      |      |      |      |      |      |        |
+------+------+------+------+------+------+--------+
| 表示:                                             |
| [✓] 作業予定  [✓] 栽培スケジュール  [✓] 天気予報   |
+--------------------------------------------------+
| カラーガイド:  ● 予定  ■ 完了  ▲ 延期              |
+--------------------------------------------------+
```

**機能と特徴**:
- 月/週/日の表示切替
- 作業タイプや圃場ごとに色分け表示
- ドラッグ&ドロップでの予定変更
- クリックでの詳細表示
- 「+」ボタンで新規予定追加
- 天気予報との統合表示
- Google/Outlookなど外部カレンダーとの同期オプション

### 2.7 資材/農機管理

**目的**: 農薬・肥料などの資材と農機具の管理

**レイアウト**:
```
+------------------------------------+
| ヘッダー                           |
+--------+---------------------------+
| サイド  | タブ: [資材] [農機]        |
| バー    +---------------------------+
|        | 検索/フィルタ | +新規登録   |
|        +---------------------------+
|        |                           |
|        | 資材/農機リスト             |
|        |                           |
|        +---------------------------+
|        | 詳細情報 / 使用履歴         |
+--------+---------------------------+
| フッター                           |
+------------------------------------+
```

**画面遷移**:
1. **資材一覧**: 
   - 資材分類（農薬、肥料、種子など）でフィルタ可能
   - 現在の在庫量とステータス表示
   - アラート表示（在庫不足、期限切れ近いものなど）

2. **資材登録/編集**:
   ```
   +------------------------------------+
   | 資材情報の登録/編集                |
   +------------------------------------+
   | 資材名: [____________]             |
   | 分類: [ドロップダウン]             |
   | メーカー: [____________]           |
   | 単位: [___] [単位選択▼]           |
   | 単価: [_______] 円                |
   +------------------------------------+
   | 現在の在庫量: [_______]            |
   | 最低在庫警告: [_______]            |
   +------------------------------------+
   | メモ: [                ]           |
   |      [________________]           |
   +------------------------------------+
   | [キャンセル]    [保存]             |
   +------------------------------------+
   ```

3. **資材入出庫記録**:
   ```
   +------------------------------------+
   | 資材の入出庫登録                   |
   +------------------------------------+
   | 資材: [ドロップダウン]             |
   | 日付: [日付選択]                   |
   | 入庫/出庫: [ラジオボタン]          |
   | 数量: [_______]                   |
   | 関連作業: [ドロップダウン] (オプション) |
   | 備考: [____________]              |
   +------------------------------------+
   | [キャンセル]    [記録]             |
   +------------------------------------+
   ```

4. **農機管理**も同様のUIで、以下の項目を追加:
   - メンテナンス履歴
   - 使用時間累計
   - 次回メンテナンス予定日
   - 稼働状況（稼働中、整備中、故障中など）

### 2.8 レポート/分析

**目的**: 農場データの分析とレポート生成

**レイアウト**:
```
+------------------------------------+
| ヘッダー                           |
+--------+---------------------------+
| サイド  | レポートテンプレート        |
| バー    | (プリセットリスト)         |
|        +---------------------------+
|        | パラメータ設定              |
|        | - 期間                    |
|        | - 圃場                    |
|        | - 作物                    |
|        +---------------------------+
|        |                           |
|        | レポート/グラフ表示エリア     |
|        |                           |
+--------+---------------------------+
| フッター                           |
+------------------------------------+
```

**主要レポートタイプ**:
1. **作業進捗レポート**:
   - 予定に対する実績の進捗状況
   - 遅延タスクのハイライト
   -